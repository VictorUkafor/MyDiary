{"version":3,"sources":["../../../client/js/all-entries-default.js"],"names":["getAllEntriesDefault","page","localStorage","getItem","url","token","addEntry","deleteEntry","dataForFetch","method","headers","authentication","fetch","then","res","json","data","authenticated","errors","login","window","setItem","location","href","message","document","getElementById","innerHTML","searchField","allEntries","forEach","entry","entryThumbnail","total","length","pagination","removeItem","error","console","log"],"mappings":";;AAAA,IAAMA,uBAAuB,SAAvBA,oBAAuB,GAAM;AACjC,MAAMC,OAAOC,aAAaC,OAAb,CAAqB,MAArB,CAAb;AACA,MAAMC,wFAA+EH,IAA/E,CAAN;AACA,MAAMI,QAAQH,aAAaC,OAAb,CAAqB,OAArB,CAAd;AACA,MAAMG,WAAWJ,aAAaC,OAAb,CAAqB,UAArB,CAAjB;AACA,MAAMI,cAAcL,aAAaC,OAAb,CAAqB,aAArB,CAApB;AACA,MAAMK,eAAe;AACnBC,YAAQ,KADW;AAEnBC,aAAS;AACP,sBAAgB,kBADT;AAEPC,sBAAgBN;AAFT;AAFU,GAArB;;AAQAO,QAAMR,GAAN,EAAWI,YAAX,EACGK,IADH,CACQ;AAAA,WAAOC,IAAIC,IAAJ,EAAP;AAAA,GADR,EAEGF,IAFH,CAEQ,UAACG,IAAD,EAAU;AACd,QAAIA,KAAKC,aAAL,KAAuB,KAAvB,IAAgCD,KAAKE,MAAzC,EAAiD;AAC/C,UAAMC,QAAQ,wBAAd;AACAC,aAAOlB,YAAP,CAAoBmB,OAApB,CAA4B,OAA5B,EAAqCF,KAArC;AACAC,aAAOE,QAAP,CAAgBC,IAAhB,GAAuB,cAAvB;AACD,KAJD,MAIO,IAAIP,KAAKQ,OAAT,EAAkB;AACvBC,eAASC,cAAT,CAAwB,gBAAxB,EAA0CC,SAA1C,wCAC4BpB,WAD5B;;AAGA,UAAIA,gBAAgB,IAApB,EAA0B;AACxBkB,iBAASC,cAAT,CAAwB,gBAAxB,EAA0CC,SAA1C,wCAC4BX,KAAKQ,OADjC;AAED;AACF,KARM,MAQA;AACL,UAAIlB,QAAJ,EAAc;AACZmB,iBAASC,cAAT,CAAwB,gBAAxB,EAA0CC,SAA1C,wCAC4BrB,QAD5B;AAED;;AAED,UAAIC,WAAJ,EAAiB;AACfkB,iBAASC,cAAT,CAAwB,gBAAxB,EAA0CC,SAA1C,wCAC4BpB,WAD5B;AAED;;AAEDkB,eAASC,cAAT,CAAwB,QAAxB,EAAkCC,SAAlC,GAA8CC,WAA9C;AACAZ,WAAKa,UAAL,CAAgBC,OAAhB,CAAwB,UAACC,KAAD,EAAW;AACjCN,iBAASC,cAAT,CAAwB,SAAxB,EAAmCC,SAAnC,IAAgDK,eAAeD,KAAf,CAAhD;AACD,OAFD;AAGA,UAAIf,KAAKiB,KAAL,GAAajB,KAAKa,UAAL,CAAgBK,MAAjC,EAAyC;AACvCT,iBAASC,cAAT,CAAwB,SAAxB,EAAmCC,SAAnC,IAAgDQ,WAAWlC,IAAX,EAAiBe,KAAKiB,KAAtB,CAAhD;AACD;AACF;AACDb,WAAOlB,YAAP,CAAoBkC,UAApB,CAA+B,UAA/B;AACAhB,WAAOlB,YAAP,CAAoBkC,UAApB,CAA+B,aAA/B;AACD,GApCH,WAqCS,UAACC,KAAD,EAAW;AAChBC,YAAQC,GAAR,CAAYF,KAAZ;AACD,GAvCH;;AAyCA,SAAO,KAAP;AACD,CAxDD","file":"all-entries-default.js","sourcesContent":["const getAllEntriesDefault = () => {\n  const page = localStorage.getItem('page');\n  const url = `https://deploy-challenge3-to-heroku.herokuapp.com/api/v1/entries?page=${page}`;\n  const token = localStorage.getItem('token');\n  const addEntry = localStorage.getItem('addEntry');\n  const deleteEntry = localStorage.getItem('deleteEntry');\n  const dataForFetch = {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      authentication: token\n    }\n  };\n\n  fetch(url, dataForFetch)\n    .then(res => res.json())\n    .then((data) => {\n      if (data.authenticated === false || data.errors) {\n        const login = 'oop! You have to login';\n        window.localStorage.setItem('login', login);\n        window.location.href = 'sign-in.html';\n      } else if (data.message) {\n        document.getElementById('successMessage').innerHTML =\n        `<h1 class=\"successField\">${deleteEntry}</h1>`;\n\n        if (deleteEntry === null) {\n          document.getElementById('successMessage').innerHTML =\n          `<h1 class=\"successField\">${data.message}</h1>`;\n        }\n      } else {\n        if (addEntry) {\n          document.getElementById('successMessage').innerHTML =\n          `<h1 class=\"successField\">${addEntry}</h1>`;\n        }\n\n        if (deleteEntry) {\n          document.getElementById('successMessage').innerHTML =\n          `<h1 class=\"successField\">${deleteEntry}</h1>`;\n        }\n\n        document.getElementById('search').innerHTML = searchField;\n        data.allEntries.forEach((entry) => {\n          document.getElementById('entries').innerHTML += entryThumbnail(entry);\n        });\n        if (data.total > data.allEntries.length) {\n          document.getElementById('entries').innerHTML += pagination(page, data.total);\n        }\n      }\n      window.localStorage.removeItem('addEntry');\n      window.localStorage.removeItem('deleteEntry');\n    })\n    .catch((error) => {\n      console.log(error);\n    });\n\n  return false;\n};\n"]}