{"version":3,"sources":["../../../client/js/all-entries-by-search.js"],"names":["getAllEntriesBySearch","page","localStorage","getItem","url","token","deleteEntry","search","dataForFetch","method","body","JSON","stringify","headers","authentication","fetch","then","res","json","data","authenticated","errors","login","window","setItem","location","href","message","document","getElementById","innerHTML","searchField","allEntries","forEach","entry","entryThumbnail","total","length","pagination","removeItem","error","console","log"],"mappings":";;AAAA,IAAMA,wBAAwB,SAAxBA,qBAAwB,GAAM;AAClC,MAAMC,OAAOC,aAAaC,OAAb,CAAqB,MAArB,CAAb;AACA,MAAMC,+FAAsFH,IAAtF,CAAN;AACA,MAAMI,QAAQH,aAAaC,OAAb,CAAqB,OAArB,CAAd;AACA,MAAMG,cAAcJ,aAAaC,OAAb,CAAqB,aAArB,CAApB;AACA,MAAMI,SAASL,aAAaC,OAAb,CAAqB,QAArB,CAAf;;AAEA,MAAMK,eAAe;AACnBC,YAAQ,MADW;AAEnBC,UAAMC,KAAKC,SAAL,CAAe,EAAEL,cAAF,EAAf,CAFa;AAGnBM,aAAS;AACP,sBAAgB,kBADT;AAEPC,sBAAgBT;AAFT;AAHU,GAArB;;AASAU,QAAMX,GAAN,EAAWI,YAAX,EACGQ,IADH,CACQ;AAAA,WAAOC,IAAIC,IAAJ,EAAP;AAAA,GADR,EAEGF,IAFH,CAEQ,UAACG,IAAD,EAAU;AACd,QAAIA,KAAKC,aAAL,KAAuB,KAAvB,IAAgCD,KAAKE,MAAzC,EAAiD;AAC/C,UAAMC,QAAQ,wBAAd;AACAC,aAAOrB,YAAP,CAAoBsB,OAApB,CAA4B,OAA5B,EAAqCF,KAArC;AACAC,aAAOE,QAAP,CAAgBC,IAAhB,GAAuB,cAAvB;AACD,KAJD,MAIO,IAAIP,KAAKQ,OAAT,EAAkB;AACvBC,eAASC,cAAT,CAAwB,gBAAxB,EAA0CC,SAA1C,wCAC4BxB,WAD5B;;AAGA,UAAIA,gBAAgB,IAApB,EAA0B;AACxBsB,iBAASC,cAAT,CAAwB,gBAAxB,EAA0CC,SAA1C,wCAC4BX,KAAKQ,OADjC;AAED;AACF,KARM,MAQA;AACL,UAAIrB,WAAJ,EAAiB;AACfsB,iBAASC,cAAT,CAAwB,gBAAxB,EAA0CC,SAA1C,wCAC4BxB,WAD5B;AAED;;AAEDsB,eAASC,cAAT,CAAwB,QAAxB,EAAkCC,SAAlC,GAA8CC,WAA9C;AACAZ,WAAKa,UAAL,CAAgBC,OAAhB,CAAwB,UAACC,KAAD,EAAW;AACjCN,iBAASC,cAAT,CAAwB,SAAxB,EAAmCC,SAAnC,IAAgDK,eAAeD,KAAf,CAAhD;AACD,OAFD;AAGA,UAAIf,KAAKiB,KAAL,GAAajB,KAAKa,UAAL,CAAgBK,MAAjC,EAAyC;AACvCT,iBAASC,cAAT,CAAwB,SAAxB,EAAmCC,SAAnC,IAAgDQ,WAAWrC,IAAX,EAAiBkB,KAAKiB,KAAtB,CAAhD;AACD;AACF;;AAEDb,WAAOrB,YAAP,CAAoBqC,UAApB,CAA+B,aAA/B;AACD,GA/BH,WAgCS,UAACC,KAAD,EAAW;AAChBC,YAAQC,GAAR,CAAYF,KAAZ;AACD,GAlCH;;AAoCA,SAAO,KAAP;AACD,CArDD","file":"all-entries-by-search.js","sourcesContent":["const getAllEntriesBySearch = () => {\n  const page = localStorage.getItem('page');\n  const url = `https://deploy-challenge3-to-heroku.herokuapp.com/api/v1/entries/search?page=${page}`;\n  const token = localStorage.getItem('token');\n  const deleteEntry = localStorage.getItem('deleteEntry');\n  const search = localStorage.getItem('search');\n\n  const dataForFetch = {\n    method: 'POST',\n    body: JSON.stringify({ search }),\n    headers: {\n      'Content-Type': 'application/json',\n      authentication: token\n    }\n  };\n\n  fetch(url, dataForFetch)\n    .then(res => res.json())\n    .then((data) => {\n      if (data.authenticated === false || data.errors) {\n        const login = 'oop! You have to login';\n        window.localStorage.setItem('login', login);\n        window.location.href = 'sign-in.html';\n      } else if (data.message) {\n        document.getElementById('successMessage').innerHTML =\n        `<h1 class=\"successField\">${deleteEntry}</h1>`;\n\n        if (deleteEntry === null) {\n          document.getElementById('successMessage').innerHTML =\n          `<h1 class=\"successField\">${data.message}</h1>`;\n        }\n      } else {\n        if (deleteEntry) {\n          document.getElementById('successMessage').innerHTML =\n          `<h1 class=\"successField\">${deleteEntry}</h1>`;\n        }\n\n        document.getElementById('search').innerHTML = searchField;\n        data.allEntries.forEach((entry) => {\n          document.getElementById('entries').innerHTML += entryThumbnail(entry);\n        });\n        if (data.total > data.allEntries.length) {\n          document.getElementById('entries').innerHTML += pagination(page, data.total);\n        }\n      }\n\n      window.localStorage.removeItem('deleteEntry');\n    })\n    .catch((error) => {\n      console.log(error);\n    });\n\n  return false;\n};\n"]}