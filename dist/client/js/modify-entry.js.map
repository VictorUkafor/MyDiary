{"version":3,"sources":["../../../client/js/modify-entry.js"],"names":["modifyEntry","entryId","localStorage","getItem","url","token","dataForFetch","method","headers","authentication","fetch","then","res","json","data","authenticated","errors","login","window","setItem","location","href","document","getElementById","value","title","content","error","console","log","processModifyEntry","forms","innerHTML","body","JSON","stringify","success"],"mappings":";;AAAA,IAAMA,cAAc,SAAdA,WAAc,GAAM;AACxB,MAAMC,UAAUC,aAAaC,OAAb,CAAqB,SAArB,CAAhB;AACA,MAAMC,mFAA0EH,OAA1E,CAAN;AACA,MAAMI,QAAQH,aAAaC,OAAb,CAAqB,OAArB,CAAd;AACA,MAAMG,eAAe;AACnBC,YAAQ,KADW;AAEnBC,aAAS;AACP,sBAAgB,kBADT;AAEPC,sBAAgBJ;AAFT;AAFU,GAArB;;AAQAK,QAAMN,GAAN,EAAWE,YAAX,EACGK,IADH,CACQ;AAAA,WAAOC,IAAIC,IAAJ,EAAP;AAAA,GADR,EAEGF,IAFH,CAEQ,UAACG,IAAD,EAAU;AACd,QAAIA,KAAKC,aAAL,KAAuB,KAAvB,IAAgCD,KAAKE,MAAzC,EAAiD;AAC/C,UAAMC,QAAQ,wBAAd;AACAC,aAAOhB,YAAP,CAAoBiB,OAApB,CAA4B,OAA5B,EAAqCF,KAArC;AACAC,aAAOE,QAAP,CAAgBC,IAAhB,GAAuB,cAAvB;AACD,KAJD,MAIO;AACLC,eAASC,cAAT,CAAwB,OAAxB,EAAiCC,KAAjC,GAAyCV,KAAKW,KAA9C;AACAH,eAASC,cAAT,CAAwB,eAAxB,EAAyCC,KAAzC,GAAiDV,KAAKY,OAAtD;AACD;AACF,GAXH,WAYS,UAACC,KAAD,EAAW;AAChBC,YAAQC,GAAR,CAAYF,KAAZ;AACD,GAdH;;AAgBA,SAAO,KAAP;AACD,CA7BD;;AA+BA3B;;AAGA,IAAM8B,qBAAqB,SAArBA,kBAAqB,GAAM;AAC/B,MAAM7B,UAAUC,aAAaC,OAAb,CAAqB,SAArB,CAAhB;AACA,MAAMC,mFAA0EH,OAA1E,CAAN;AACA,MAAMI,QAAQH,aAAaC,OAAb,CAAqB,OAArB,CAAd;AACA,MAAMsB,QAAQH,SAASS,KAAT,CAAe/B,WAAf,CAA2ByB,KAA3B,CAAiCD,KAA/C;AACA,MAAME,UAAUJ,SAASS,KAAT,CAAe/B,WAAf,CAA2B0B,OAA3B,CAAmCF,KAAnD;;AAEAF,WAASC,cAAT,CAAwB,cAAxB,EAAwCS,SAAxC,GAAoD,EAApD;;AAEA,MAAM1B,eAAe;AACnBC,YAAQ,KADW;AAEnB0B,UAAMC,KAAKC,SAAL,CAAe,EAAEV,YAAF,EAASC,gBAAT,EAAf,CAFa;AAGnBlB,aAAS;AACP,sBAAgB,kBADT;AAEPC,sBAAgBJ;AAFT;AAHU,GAArB;;AASAK,QAAMN,GAAN,EAAWE,YAAX,EACGK,IADH,CACQ;AAAA,WAAOC,IAAIC,IAAJ,EAAP;AAAA,GADR,EAEGF,IAFH,CAEQ,UAACG,IAAD,EAAU;AACd,QAAIA,KAAKC,aAAL,KAAuB,KAA3B,EAAkC;AAChC,UAAME,QAAQ,wBAAd;AACAC,aAAOhB,YAAP,CAAoBiB,OAApB,CAA4B,OAA5B,EAAqCF,KAArC;AACAC,aAAOE,QAAP,CAAgBC,IAAhB,GAAuB,cAAvB;AACD,KAJD,MAIO,IAAIP,KAAKE,MAAT,EAAiB;AACtBM,eAASC,cAAT,CAAwB,cAAxB,EAAwCS,SAAxC,sCAC0BlB,KAAKE,MAD/B;AAED,KAHM,MAGA;AACLE,aAAOhB,YAAP,CAAoBiB,OAApB,CAA4B,aAA5B,EAA2CL,KAAKsB,OAAhD;AACAlB,aAAOE,QAAP,CAAgBC,IAAhB,GAAuB,mBAAvB;AACD;AACF,GAdH,WAeS,UAACM,KAAD,EAAW;AAChBC,YAAQC,GAAR,CAAYF,KAAZ;AACD,GAjBH;;AAmBA,SAAO,KAAP;AACD,CAtCD","file":"modify-entry.js","sourcesContent":["const modifyEntry = () => {\n  const entryId = localStorage.getItem('entryId');\n  const url = `https://deploy-challenge3-to-heroku.herokuapp.com/api/v1/entries/${entryId}`;\n  const token = localStorage.getItem('token');\n  const dataForFetch = {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      authentication: token\n    }\n  };\n\n  fetch(url, dataForFetch)\n    .then(res => res.json())\n    .then((data) => {\n      if (data.authenticated === false || data.errors) {\n        const login = 'oop! You have to login';\n        window.localStorage.setItem('login', login);\n        window.location.href = 'sign-in.html';\n      } else {\n        document.getElementById('title').value = data.title;\n        document.getElementById('Entry_content').value = data.content;\n      }\n    })\n    .catch((error) => {\n      console.log(error);\n    });\n\n  return false;\n};\n\nmodifyEntry();\n\n\nconst processModifyEntry = () => {\n  const entryId = localStorage.getItem('entryId');\n  const url = `https://deploy-challenge3-to-heroku.herokuapp.com/api/v1/entries/${entryId}`;\n  const token = localStorage.getItem('token');\n  const title = document.forms.modifyEntry.title.value;\n  const content = document.forms.modifyEntry.content.value;\n\n  document.getElementById('errorMessage').innerHTML = '';\n\n  const dataForFetch = {\n    method: 'PUT',\n    body: JSON.stringify({ title, content }),\n    headers: {\n      'Content-Type': 'application/json',\n      authentication: token\n    }\n  };\n\n  fetch(url, dataForFetch)\n    .then(res => res.json())\n    .then((data) => {\n      if (data.authenticated === false) {\n        const login = 'oop! You have to login';\n        window.localStorage.setItem('login', login);\n        window.location.href = 'sign-in.html';\n      } else if (data.errors) {\n        document.getElementById('errorMessage').innerHTML =\n        `<h1 class=\"errorField\">${data.errors}</h1>`;\n      } else {\n        window.localStorage.setItem('modifyEntry', data.success);\n        window.location.href = 'single-entry.html';\n      }\n    })\n    .catch((error) => {\n      console.log(error);\n    });\n\n  return false;\n};\n"]}